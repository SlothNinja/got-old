package main

import (
	"github.com/gin-gonic/gin"
	"github.com/pkg/errors"

	"bitbucket.org/SlothNinja/sn/user"
)

func (g *Game) Reset(c *gin.Context, cu user.User) (err error) {
	var (
		cp    *player.Player
		found bool
	)

	if cp, found = g.currentPlayerFor(cu); !found || !g.CPorAdmin(cp.ID, cu) {
		err = errors.New("only the current player can reset a move")
		return
	}

	g.UndoStack.Reset()

	return
}
